<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=BIZ+UDMincho&family=BIZ+UDPGothic&family=IBM+Plex+Sans+JP&family=Space+Grotesk:wght@300..700&display=swap"
        rel="stylesheet">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    .biz-udmincho-regular {
        font-family: "BIZ UDMincho", serif;
        font-weight: 400;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Thin.woff2') format('woff2');
        font-weight: 100;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-ExtraLight.woff2') format('woff2');
        font-weight: 200;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Light.woff2') format('woff2');
        font-weight: 300;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Medium.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-SemiBold.woff2') format('woff2');
        font-weight: 600;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Bold.woff2') format('woff2');
        font-weight: 700;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-ExtraBold.woff2') format('woff2');
        font-weight: 800;
        font-style: normal;
    }

    @font-face {
        font-family: 'SUIT';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Heavy.woff2') format('woff2');
        font-weight: 900;
        font-style: normal;
    }

    .space-grotesk {
        font-family: "Space Grotesk", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
    }

    body,
    html {
        width: 100vw;
        height: auto;
        margin: 0;
        padding: 0;
        background-color: #DBD3C8;
        background-image: url('./img/á„Œá…©á†¼á„‹á…µá„Œá…µá†¯á„€á…¡á†·.png');
        background-size: cover;
        /* border: 1px solid red; */
        overflow-x: hidden;
    }

    header {
        position: fixed;
        top: 0;
        left: 0;
        display: flex;
        /* border: 1px solid red; */
        justify-content: center;
        align-items: center;
        padding: 1.5vw;
        z-index: 30;
        /* border: 1px solid red; */
        width: 100vw;
        transition: all 0.5s ease;
        border-radius: 0 0 1.1vw 1.1vw;
    }

    header .logo-name {
        /* width: 4.5vw; */
        font-size: 1.5vw;
        position: relative;
        right: 42vw;
        font-family: "BIZ UDMincho", serif;
        font-weight: 300;
    }

    header ul {
        display: flex;
        list-style-type: none;
        /* border: 1px solid red; */
        position: absolute;
        left: 72vw;
    }

    header ul li {
        padding: 1.5vw;
    }

    header a {
        text-decoration: none;
        color: #FFFFFF;
        font-family: 'SUIT';
        transition: all 0.5s ease;
        font-size: 0.9vw;
    }

    header.scroll {
        background-color: rgba(255, 255, 255, 0.151);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        transition: background-color 0.5s ease, backdrop-filter 0.5s ease;
    }


    header.scroll li a,
    header.scroll .logo-name {
        color: #F7F8F8;
    }

    #package-content {
        width: 100vw;
        min-height: 50vw;
        /* border: 3px solid red; */
        display: flex;
        flex-flow: column;
        justify-content: center;
        align-items: center;
        background-image: url('img/value-bg.png');
        background-size: cover;
        background-repeat: no-repeat;
        padding-top: 4vw;
    }

    #package-content h2 {
        font-family: 'SUIT';
        font-weight: 400;
        font-size: 2vw;
    }

    .package {
        position: relative;
        width: 50vw;
        height: 50vw;
        padding: 16px;
        border-radius: 8px;
        overflow: visible;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    .text-line {
        position: absolute;
        cursor: grab;
        font-size: 16px;
        user-select: none;
        background: transparent;
        transition: font-size 0.2s ease;
    }


    /* ê¸°ì¡´ ì„ íƒëœ ë¬¸ì¥ ë°°ê²½ìƒ‰ ìŠ¤íƒ€ì¼ ì‚­ì œ ë˜ëŠ” ìˆ˜ì • */
    .text-line.selected {
        outline: 0.08vw solid #c8c8c8;
        background-color: #fff;
        /* í°ìƒ‰ ë°°ê²½ ì ìš© */
        /* background: transparent;  â† ì´ ì¤„ ì§€ìš°ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬ */
        outline-offset: 0.2vw;
        padding: 0;
        border-radius: 0.1vw;
        transition: outline-color 0.2s ease, box-shadow 0.2s ease;
    }


    .controls {
        display: flex;
        /* flex-direction: column; */
        justify-content: center;
        align-items: center;
        gap: 1rem;
        /* align-items: center; */
    }

    .controls label {
        font-size: 14px;
    }

    /* input[type="color"],
    input[type="number"] {
        padding: 4px;
        font-size: 14px;
        margin-left: 8px;
    } */

    /* .hint {
        font-size: 12px;
        color: #999;
        margin-top: 1rem;
    } */

    /* .trash {
        width: 60px;
        height: 60px;
        margin-top: 2rem;
        background: #ccc;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: #fff;
    } */

    /* .undo-btn {
        margin-top: 1rem;
        font-size: 14px;
        padding: 6px 14px;
        border: 1px solid #aaa;
        background: white;
        cursor: pointer;
        border-radius: 4px;
    } */

    /* .undo-btn:hover {
        background: #eee;
    } */
</style>

<body>
    <header>
        <a class="logo-name" href="index.html">
            <p>åŸç¡å“‰</p>
        </a>
        <ul>
            <li><a href="index.html#hara">ABOUT</a></li>
            <li><a href="nav.html">DESIGN</a></li>
            <li><a href="value.html">EMPTINESS</a></li>
        </ul>
    </header>

    <section id="package-content">
        <!-- <h2>Begin Your Own Emptiness</h2> -->

        <!-- <div class="package" id="package" style="background-image: url('../img/á„‘á…¢á„á…µá„Œá…µ.png');
                        background-size: cover;
                        background-position: center;
                        width: 300px;
                        height: 420px;
                        padding: 16px;
                        border-radius: 8px;"> -->


        <div class="package" id="package" style="background-image: url('../img/íŒ¨í‚¤ì§€.png');">
            <div class=" text-line" draggable="true" style="top: 6vw; left: 3vw;">MUJIâ„¢</div>
            <div class="text-line" draggable="true" style="top: 8vw; left: 3vw;">Pure Essence Face Mist</div>
            <div class="text-line" draggable="true" style="top: 11vw; left: 3vw; font-size:14px;">
                Refreshing hydration for your sensitive skin.
            </div>
            <div class="text-line" draggable="true" style="top: 13vw; left: 3vw;">120ml / Made in Japan</div>
            <div class="text-line" draggable="true" style="top: 15vw; left: 3vw; font-size:13px;">
                ì£¼ìš” ì„±ë¶„: Water (Aqua), Aloe Vera Extract, Chamomile Extract, Glycerin
            </div>
            <div class="text-line" draggable="true" style="top: 19vw; left: 3vw; font-size:12px;">
                ì‚¬ìš©ë²•: ì–¼êµ´ì—ì„œ 20cm ë–¨ì–´ì ¸ ê³ ë¥´ê²Œ ë¶„ì‚¬í•´ ì£¼ì„¸ìš”. ì•„ì¹¨, ì €ë… ì‚¬ìš© ê¶Œì¥.
            </div>
            <div class="text-line" draggable="true" style="top: 21vw; left: 3vw; font-size:12px; color:#555;">
                ì£¼ì˜ ì‚¬í•­: ì§ì‚¬ê´‘ì„ ì„ í”¼í•´ ì„œëŠ˜í•œ ê³³ì— ë³´ê´€í•˜ì„¸ìš”.<br>
                ì‚¬ìš© ì¤‘ í”¼ë¶€ ì´ìƒ ì‹œ ì‚¬ìš©ì„ ì¤‘ë‹¨í•˜ì„¸ìš”.
            </div>
            <div class="text-line" draggable="true" style="top: 25vw; left: 3vw; font-size:11px; color:#777;">
                ì œì¡°ì‚¬: Manufactured by MUJI Co., Ltd.<br>
                ê³ ê°ì„¼í„°: 1234-5678
            </div>
            <div class="text-line" draggable="true" style="top: 29vw; left: 3vw; font-size:11px; color:#999;">
                ë°”ì½”ë“œ: 1234 5678 9012
            </div>
        </div>

        <!-- </div> -->



        <div class="controls">
            <div>
                <!-- <label>ğŸ¨ ë°°ê²½ ìƒ‰:</label> -->
                <!-- <input type="color" id="bgColorPicker" value="#eeeeee" /> -->
            </div>

            <div>
                <label>Font size</label>
                <input type="number" id="fontSizeInput" value="16" min="8" max="40" />
            </div>

            <div class="trash" id="trash">ğŸ—‘ï¸</div>
            <button class="undo-btn" onclick="undoDelete()">ë˜ëŒë¦¬ê¸°</button>

            <button id="saveBtn">ğŸ’¾ íŒ¨í‚¤ì§€ ì´ë¯¸ì§€ ì €ì¥í•˜ê¸°</button>
        </div>

        <!-- <div class="trash" id="trash">ğŸ—‘ï¸</div>
        <button class="undo-btn" onclick="undoDelete()">ë˜ëŒë¦¬ê¸°</button> -->

        <!-- <div class="hint">ğŸ’¡ ë¬¸ì¥ì„ í´ë¦­í•˜ì—¬ ì„ íƒ í›„ ê°œë³„ ìŠ¤íƒ€ì¼ ì¡°ì • / ë“œë˜ê·¸í•´ì„œ ì“°ë ˆê¸°í†µì— ë²„ë¦´ ìˆ˜ ìˆì–´ìš”</div> -->

        <!-- <button id="saveBtn">ğŸ’¾ íŒ¨í‚¤ì§€ ì´ë¯¸ì§€ ì €ì¥í•˜ê¸°</button> -->

        <h1>Begin Your Own Emptiness</h1>
        <p>â€œBegin Your Own Emptinessâ€ is an interactive experience where you can explore Kenya Haraâ€™s design philosophy
            firsthand.
            Clear away the unnecessary and create your own simple, essential product packaging. Discover a unique
            journey of finding
            true value within simplicity.</p>

    </section>


    <!-- <section id="end">
        <h3>
            "Emptiness is not the absence of everything, <br>
            but the presence of only the essential."
        </h3>

        <h1>
            "What sense of emptiness did you leave behind?"
        </h1>
    </section> -->
    <script>
        const packageBox = document.getElementById("package");
        const bgColorPicker = document.getElementById("bgColorPicker");
        const fontSizeInput = document.getElementById("fontSizeInput");
        const trash = document.getElementById("trash");
        const undoBtn = document.querySelector(".undo-btn");

        let selected = null;
        let deletedStack = [];
        let historyStack = [];  // ìƒíƒœ ì €ì¥ ìŠ¤íƒ

        // ìƒíƒœ ì €ì¥ í•¨ìˆ˜ (ëª¨ë“  text-line ìƒíƒœë¥¼ ê¸°ë¡)
        function saveState() {
            const lines = Array.from(packageBox.querySelectorAll('.text-line')).map(el => ({
                content: el.innerText,
                fontSize: el.style.fontSize || "16px",
                top: el.style.top,
                left: el.style.left,
                color: el.style.color || "black",
                id: el.dataset.id  // idê°€ ì—†ìœ¼ë©´ ë‚˜ì¤‘ì— ë¶€ì—¬í•  ìˆ˜ë„ ìˆìŒ
            }));
            historyStack.push(lines);
            // ìƒíƒœ ìŠ¤íƒ ë„ˆë¬´ ì»¤ì§€ì§€ ì•Šê²Œ ìµœëŒ€ í¬ê¸° ì œí•œ ê°€ëŠ¥
        }

        // ìƒíƒœ ë³µì› í•¨ìˆ˜
        function restoreState(state) {
            // ìƒíƒœê°€ ë°°ì—´ì„ (ê° ë¬¸ì¥ ì •ë³´)
            packageBox.innerHTML = '';
            state.forEach(line => {
                const newLine = document.createElement("div");
                newLine.className = "text-line";
                newLine.innerText = line.content;
                newLine.style.fontSize = line.fontSize;
                newLine.style.top = line.top;
                newLine.style.left = line.left;
                newLine.style.color = line.color;
                newLine.setAttribute("draggable", "false"); // draggableì€ falseë¡œ ë°”ê¿ˆ (ë§ˆìš°ìŠ¤ ì´ë™ìœ¼ë¡œ ì²˜ë¦¬)
                packageBox.appendChild(newLine);
                attachDragHandlers(newLine); // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ìƒˆë¡œ ë¶™ì„
            });
        }

        // ê¸°ì¡´ íŒ¨í‚¤ì§€ ë°•ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸ (ë¬¸ì¥ ì„ íƒ ì²˜ë¦¬)
        packageBox.addEventListener("click", (e) => {
            if (e.target.classList.contains("text-line")) {
                if (selected) selected.classList.remove("selected");
                selected = e.target;
                selected.classList.add("selected");
                fontSizeInput.value = parseInt(window.getComputedStyle(selected).fontSize);
            }
        });

        // íŒ¨í‚¤ì§€ ì™¸ë¶€ í´ë¦­ ì‹œ ì„ íƒ í•´ì œ ì²˜ë¦¬
        document.addEventListener("click", (e) => {
            const target = e.target;
            // ì˜ˆì™¸ ì²˜ë¦¬ ëŒ€ìƒ ìš”ì†Œë“¤
            const isTextLine = target.classList.contains("text-line");
            const isInPackage = packageBox.contains(target);
            const isInControls = document.querySelector('.controls').contains(target);

            if (!isTextLine && !isInPackage && !isInControls) {
                if (selected) {
                    selected.classList.remove("selected");
                    selected = null;
                    fontSizeInput.value = 16; // í•„ìš”ì‹œ ê¸°ë³¸ê°’ ì´ˆê¸°í™”
                }
            }
        });



        // í°íŠ¸ í¬ê¸° ì¡°ì ˆ
        fontSizeInput.addEventListener("input", (e) => {
            if (selected) {
                saveState();
                selected.style.fontSize = `${e.target.value}px`;
            }
        });

        // ë°°ê²½ ìƒ‰ ë³€ê²½
        // bgColorPicker.addEventListener("input", (e) => {
        //     saveState();
        //     packageBox.style.backgroundColor = e.target.value;
        // });

        // ë“œë˜ê·¸ ì‚­ì œ
        let dragged = null;
        packageBox.addEventListener("dragstart", (e) => {
            if (e.target.classList.contains("text-line")) {
                dragged = e.target;
            }
        });

        trash.addEventListener("dragover", (e) => {
            e.preventDefault();
            trash.style.background = "#aa3333";
        });

        trash.addEventListener("dragleave", () => {
            trash.style.background = "#ccc";
        });

        trash.addEventListener("drop", () => {
            if (dragged) {
                saveState();
                deletedStack.push({
                    content: dragged.innerText,
                    fontSize: dragged.style.fontSize || "16px",
                    top: dragged.style.top,
                    left: dragged.style.left,
                    color: dragged.style.color || "black"
                });
                dragged.remove();
                trash.style.background = "#ccc";
                dragged = null;
            }
        });

        // ë˜ëŒë¦¬ê¸° (Undo)
        function undoDelete() {
            if (historyStack.length === 0) return;
            const prevState = historyStack.pop();
            restoreState(prevState);
            selected = null;
            fontSizeInput.value = 16;
        }

        // ìƒˆ ë¬¸ì¥ì— ë“œë˜ê·¸ í•¸ë“¤ëŸ¬ ë¶™ì´ëŠ” í•¨ìˆ˜
        function attachDragHandlers(el) {
            let offsetX, offsetY;
            el.style.position = 'absolute';
            el.style.cursor = 'grab';

            el.addEventListener('mousedown', (e) => {
                e.preventDefault();
                offsetX = e.clientX - el.getBoundingClientRect().left;
                offsetY = e.clientY - el.getBoundingClientRect().top;
                el.style.zIndex = 1000;

                function onMouseMove(e) {
                    el.style.left = `${e.clientX - packageBox.getBoundingClientRect().left - offsetX}px`;
                    el.style.top = `${e.clientY - packageBox.getBoundingClientRect().top - offsetY}px`;
                }

                function onMouseUp(e) {
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', onMouseUp);
                    el.style.zIndex = 1;

                    // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ê°€ trash ì•ˆì¸ì§€ ì²´í¬
                    const trashRect = trash.getBoundingClientRect();
                    if (
                        e.clientX >= trashRect.left &&
                        e.clientX <= trashRect.right &&
                        e.clientY >= trashRect.top &&
                        e.clientY <= trashRect.bottom
                    ) {
                        // ì‚­ì œ ì²˜ë¦¬
                        saveState();
                        deletedStack.push({
                            content: el.innerText,
                            fontSize: el.style.fontSize || "16px",
                            top: el.style.top,
                            left: el.style.left,
                            color: el.style.color || "black"
                        });
                        el.remove();
                    } else {
                        // ê·¸ëƒ¥ ìœ„ì¹˜ë§Œ ë³€ê²½ëœ ê±° ì €ì¥
                        saveState();
                    }
                }

                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });
        }


        // ì´ˆê¸° ë¬¸ì¥ë“¤ì— ë“œë˜ê·¸ í•¸ë“¤ëŸ¬ ë¶™ì´ê¸°
        document.querySelectorAll('.text-line').forEach(el => {
            el.style.position = 'absolute'; // ê¼­ ìœ„ì¹˜ ì§€ì • í•„ìš”
            attachDragHandlers(el);
        });

        // ì´ˆê¸° ìƒíƒœ ì €ì¥
        saveState();


        const saveBtn = document.getElementById('saveBtn');

        saveBtn.addEventListener('click', () => {
            // íŒ¨í‚¤ì§€ ì˜ì—­ì„ ìº¡ì²˜
            html2canvas(packageBox).then(canvas => {
                // ìº”ë²„ìŠ¤ë¥¼ ì´ë¯¸ì§€ ë°ì´í„° URLë¡œ ë³€í™˜
                const dataURL = canvas.toDataURL('image/png');

                // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
                const link = document.createElement('a');
                link.href = dataURL;
                link.download = 'my-muji-package.png';

                // ê°•ì œë¡œ í´ë¦­í•´ì„œ ë‹¤ìš´ë¡œë“œ ì‹œì‘
                link.click();
            });
        });


    </script>
</body>

</html>